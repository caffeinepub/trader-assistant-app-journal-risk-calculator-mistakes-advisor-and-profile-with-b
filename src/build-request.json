{
  "kind": "build_request",
  "title": "Add light/dark theme toggle in Profile section",
  "priority": "normal",
  "requirements": [
    {
      "id": "REQ-1",
      "text": "Add a Light/Dark theme option in the Profile tab UI that lets the user switch the app theme between light and dark.",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-3"
        ],
        "quotes": [
          "Add option of light theme and dark theme in profile section"
        ]
      },
      "acceptanceCriteria": [
        "Profile tab contains an \"Appearance\" (or equivalent) section with controls to select Light or Dark theme.",
        "Switching the setting immediately updates the UI colors (background/foreground/cards) using the existing Tailwind/CSS variable theme setup.",
        "All user-facing labels for this section are in English (e.g., \"Appearance\", \"Theme\", \"Light\", \"Dark\")."
      ]
    },
    {
      "id": "REQ-2",
      "text": "Persist the selected theme on the client and restore it on app load, so the userâ€™s choice remains after refresh/reopen.",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-3"
        ],
        "quotes": [
          "Add option of light theme and dark theme in profile section"
        ]
      },
      "acceptanceCriteria": [
        "Theme selection is saved in browser storage (e.g., localStorage).",
        "On page load, the app reads the stored theme and applies it before/when rendering so the chosen theme is consistently applied.",
        "If no stored preference exists, default behavior is clearly defined and consistent (e.g., keep current default dark, but still user-changeable)."
      ]
    },
    {
      "id": "REQ-3",
      "text": "Remove the current runtime enforcement of dark mode so that selecting Light theme is not overridden, and ensure native browser UI color-scheme follows the selected theme.",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-3"
        ],
        "quotes": [
          "Add option of light theme and dark theme in profile section"
        ]
      },
      "acceptanceCriteria": [
        "The app no longer unconditionally forces the `dark` class on `document.documentElement` at runtime.",
        "When switching themes, `document.documentElement` has the `dark` class only when Dark theme is selected (and removed when Light is selected).",
        "The document `color-scheme` style is updated to match the selected theme (\"dark\" for dark theme, \"light\" for light theme)."
      ]
    }
  ],
  "constraints": [
    "Do not edit files under frontend/src/components/ui (Shadcn components are read-only and must be composed).",
    "Do not edit immutable hook/bootstrapping paths listed in SYSTEM_CONTEXT (e.g., frontend/src/hooks/useInternetIdentity.ts(x), frontend/src/hooks/useActor.ts, frontend/src/main.tsx)."
  ],
  "nonGoals": [
    "Do not add backend storage for theme preferences (client-side persistence only).",
    "Do not implement additional themes beyond Light and Dark."
  ],
  "imageRequirements": {
    "required": [],
    "edits": []
  },
  "userProfileUpdate": {
    "goalsToAdd": [],
    "goalsToRemove": [],
    "preferencesToAdd": [],
    "preferencesToRemove": [],
    "miscToAdd": [],
    "miscToRemove": [],
    "fieldsToSet": {},
    "fieldsToDelete": []
  }
}